<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AT&T Expert Path Checklist - Installation</title>
<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
  background:#0f172a;
  color:white;
  margin:0;
  padding:20px;
}
h1 { margin-top:0; }
.controls button {
  margin:5px 5px 5px 0;
  padding:8px 12px;
  border-radius:6px;
  border:none;
  cursor:pointer;
}
details {
  margin-bottom:12px;
  background:#1e293b;
  border-radius:8px;
  padding:12px;
}
summary {
  font-weight:bold;
  cursor:pointer;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.badge {
  font-size:12px;
  padding:4px 8px;
  border-radius:20px;
}
.done { background:#16a34a; }
.notdone { background:#dc2626; }
.stat-box {
  margin-bottom:15px;
}
label {
  display:block;
  margin:6px 0;
}
</style>
</head>
<body>

<h1>AT&T Expert Path Checklist â€“ Installation</h1>

<div class="stat-box">
Sections done: <span id="secDone">0</span> / <span id="secTotal">0</span><br>
Items done: <span id="itemDone">0</span> / <span id="itemTotal">0</span>
</div>

<div class="controls">
<button onclick="expandAll()">Expand All</button>
<button onclick="collapseAll()">Collapse All</button>
<button onclick="resetChecklist()">Reset Progress</button>
<button onclick="completeClear()" id="completeBtn" disabled>Complete & Clear</button>
</div>

<div id="checklist"></div>

<script>
var STORAGE_KEY = "att_expert_checklist_v1";

var sectionsData = [
  { title:"Pre-Call",
    items:["Perform Pre-Call within 15 min of dispatching by calling the CBR. If no answer, leave voicemail and send text."]
  },
  { title:"Marker 1 - Greet & Verify",
    items:["Greet customer and verify install details.","Confirm SHM app downloaded."]
  },
  { title:"Marker 2 - Qualify to Terminal",
    items:["Turn Optimeter ON at PFP.","Scope shutter jumper.","Perform True Test.","Confirm good light at CFST port."]
  },
  { title:"Marker 3 - Survey Customer & Premises",
    items:["Discuss RG location.","Perform WiFi assessment.","Discuss WiFi extenders if needed."]
  },
  { title:"Marker 4 - Extend to Home",
    items:["Turn Optimeter ON at Slack."]
  },
  { title:"Marker 5 - Connect to Gateway",
    items:["Install fiber jack.","Perform True Test from shutter jumper.","Activate RG and verify registration."]
  },
  { title:"Marker 6 - Finalize Experience",
    items:["Add extenders if requested.","Demonstrate Active Armor and My WiFi."]
  },
  { title:"Marker 7 - Verify, Thank & Close",
    items:["Answer questions.","Thank customer and provide Make it Matter gift.","Finalize testing and close job."]
  }
];

function saveState() {
  var items = document.querySelectorAll("input[type=checkbox]");
  var state = [];
  items.forEach(function(cb){ state.push(cb.checked); });
  localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
}

function loadState() {
  var saved = localStorage.getItem(STORAGE_KEY);
  if(!saved) return;
  var state = JSON.parse(saved);
  var items = document.querySelectorAll("input[type=checkbox]");
  items.forEach(function(cb, i){
    if(state[i]) cb.checked = true;
  });
}

function render(){
  var container = document.getElementById("checklist");
  container.innerHTML = "";

  sectionsData.forEach(function(section, sIndex){
    var details = document.createElement("details");

    var summary = document.createElement("summary");
    summary.innerHTML = section.title + 
      " <span class='badge notdone' id='badge-"+sIndex+"'>NOT DONE</span>";

    details.appendChild(summary);

    section.items.forEach(function(item, iIndex){
      var label = document.createElement("label");
      var checkbox = document.createElement("input");
      checkbox.type = "checkbox";
      checkbox.onchange = update;
      label.appendChild(checkbox);
      label.appendChild(document.createTextNode(" " + item));
      details.appendChild(label);
    });

    container.appendChild(details);
  });

  document.getElementById("secTotal").innerText = sectionsData.length;
}

function update(){
  var sections = document.querySelectorAll("details");
  var totalItems = 0;
  var doneItems = 0;
  var secDone = 0;

  sections.forEach(function(section, sIndex){
    var checkboxes = section.querySelectorAll("input[type=checkbox]");
    var done = 0;

    checkboxes.forEach(function(cb){
      totalItems++;
      if(cb.checked){
        done++;
        doneItems++;
      }
    });

    var badge = document.getElementById("badge-"+sIndex);
    if(done === checkboxes.length && checkboxes.length > 0){
      badge.className = "badge done";
      badge.innerText = "DONE";
      secDone++;
    } else {
      badge.className = "badge notdone";
      badge.innerText = "NOT DONE";
    }
  });

  document.getElementById("secDone").innerText = secDone;
  document.getElementById("itemDone").innerText = doneItems;
  document.getElementById("itemTotal").innerText = totalItems;

  var completeBtn = document.getElementById("completeBtn");
  completeBtn.disabled = !(doneItems === totalItems && totalItems > 0);

  saveState();
}

function expandAll(){
  document.querySelectorAll("details").forEach(function(d){ d.open = true; });
}
function collapseAll(){
  document.querySelectorAll("details").forEach(function(d){ d.open = false; });
}
function resetChecklist(){
  if(confirm("Reset all progress?")){
    document.querySelectorAll("input[type=checkbox]").forEach(function(cb){ cb.checked = false; });
    localStorage.removeItem(STORAGE_KEY);
    update();
  }
}
function completeClear(){
  if(confirm("Checklist complete. Clear for next job?")){
    resetChecklist();
  }
}

render();
setTimeout(loadState, 100);
</script>

</body>
</html>
